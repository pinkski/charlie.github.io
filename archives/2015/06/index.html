
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="yolynn">
    <title>Archives: 2015/6 - yolynn</title>
    <meta name="author" content="yolynn">
    
    
        <link rel="icon" href="http://yolynn.com/assets/images/head.png">
    
    
    <meta name="description" content="äº‘åœ¨é’å¤©æ°´åœ¨ç“¶">
<meta property="og:type" content="blog">
<meta property="og:title" content="yolynn">
<meta property="og:url" content="http://yolynn.com/archives/2015/06/index.html">
<meta property="og:site_name" content="yolynn">
<meta property="og:description" content="äº‘åœ¨é’å¤©æ°´åœ¨ç“¶">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="yolynn">
<meta name="twitter:description" content="äº‘åœ¨é’å¤©æ°´åœ¨ç“¶">
    
    
        
    
    
        <meta property="og:image" content="http://yolynn.com/assets/images/head.png"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/font-awesome.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox-thumbs.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css" type="text/css">
    <!--STYLES END-->
    
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">yolynn</a>
    </h1>
    
        
            <a  class="header-right-icon "
                href="/#about">
        
        
            <i class="fa fa-lg fa-head.png"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    
        <div class="sidebar-profile">
            <a href="/#about">
                    <img class="sidebar-profile-picture" src="/assets/images/head.png"/>
            </a>
            <span class="sidebar-profile-name">yolynn</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archives</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/yolynn-bird" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="http://weibo.com/zxl20zxl" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-weibo"></i>
                    <span class="sidebar-button-desc">global.weibo</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://stackoverflow.com/users/2662962/yolynn" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                    <span class="sidebar-button-desc">Stack Overflow</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/zxl20zxl" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://www.instagram.com/yolynn.bird" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-instagram"></i>
                    <span class="sidebar-button-desc">global.instagram</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://dribbble.com/yolynn" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-dribbble"></i>
                    <span class="sidebar-button-desc">global.dribbble</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="http://yolynn.com/2010/04/22/weixin/"
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-weixin"></i>
                    <span class="sidebar-button-desc">global.weixin</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://www.zhihu.com/people/yolynn" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-flickr"></i>
                    <span class="sidebar-button-desc">global.zhihu</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="mailto://zxl20zxl@gmail.com" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                    <span class="sidebar-button-desc">Mail</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    

<section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2015/06/20/c_pointer/">
                            æŒ‡é’ˆåŸºç¡€åˆ°è¿›é˜¶
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2015-06-20T18:15:02+08:00">
	
		    Jun 20, 2015
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h2 id="å­¦ä¹ æŒ‡é’ˆéœ€è¦ä¼šä»€ä¹ˆï¼Ÿ">å­¦ä¹ æŒ‡é’ˆéœ€è¦ä¼šä»€ä¹ˆï¼Ÿ</h2><p>å¦‚ä½•å®Œå…¨ç†è§£ä¸€ä¸ªå¤æ‚ç±»å‹ï¼Œè®°ä½ä¸€æ¡åŸåˆ™ï¼š</p>
<ul>
<li>ä»<strong>å˜é‡å</strong>å¤„èµ·ï¼Œæ ¹æ®<strong>è¿ç®—ç¬¦ä¼˜å…ˆçº§</strong>ç»“åˆï¼Œä¸€æ­¥ä¸€æ­¥åˆ†æ</li>
</ul>
<p>ä¸¾å‡ ä¸ªğŸŒ°ï¼š</p>
<ol>
<li>int p;    <ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸intç»“åˆï¼Œè¯´æ˜pæ˜¯<strong>æ•´å‹å˜é‡</strong></li>
</ul>
</li>
<li>int *p;    <ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸*ç»“åˆï¼Œè¯´æ˜pæ˜¯<strong>æŒ‡é’ˆ</strong>ï¼Œ</li>
<li>å†ä¸intç»“åˆï¼Œè¯´æ˜<strong>æŒ‡é’ˆæŒ‡å‘intå‹</strong>ï¼Œ</li>
<li>æ‰€ä»¥pæ˜¯è¿”å›intå‹æ•°æ®çš„æŒ‡é’ˆ</li>
</ul>
</li>
<li>int p[3];<ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸[]ç»“åˆï¼Œè¯´æ˜pæ˜¯<strong>æ•°ç»„</strong>ï¼Œ</li>
<li>å†ä¸intç»“åˆï¼Œè¯´æ˜<strong>[]é‡Œé¢æ˜¯intå‹</strong>,</li>
<li>æ‰€ä»¥pæ˜¯è¿”å›intå‹æ•°æ®çš„æ•°ç»„</li>
</ul>
</li>
<li>int *p[3];<ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸[]ç»“åˆï¼Œè¯´æ˜pæ˜¯<strong>æ•°ç»„</strong>ï¼Œ</li>
<li>å†ä¸*ç»“åˆï¼Œè¯´æ˜<strong>[]é‡Œé¢æ˜¯æŒ‡é’ˆå‹</strong>ï¼Œ</li>
<li>å†ä¸intç»“åˆï¼Œè¯´æ˜<strong>æŒ‡é’ˆæŒ‡å‘å†…å®¹æ˜¯intå‹</strong>ï¼Œ</li>
<li>æ‰€ä»¥pæ˜¯ç”±è¿”å›intå‹æ•°æ®çš„æŒ‡é’ˆç»„æˆçš„æ•°ç»„</li>
</ul>
</li>
<li>int (*p)[3];<ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸*ç»“åˆï¼Œè¯´æ˜pæ˜¯<strong>æŒ‡é’ˆ</strong>ï¼Œ</li>
<li>å†ä¸[]ç»“åˆï¼Œè¯´æ˜<strong>æŒ‡é’ˆæŒ‡å‘[]å‹</strong>ï¼Œ</li>
<li>å†ä¸intç»“åˆï¼Œè¯´æ˜<strong>[]é‡Œæ˜¯intå‹</strong>ï¼Œ</li>
<li>æ‰€ä»¥pæ˜¯æŒ‡å‘ç”±intå‹æ•°æ®ç»„æˆçš„æ•°ç»„çš„æŒ‡é’ˆ</li>
</ul>
</li>
<li>int **p;<ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸*ç»“åˆï¼Œè¯´æ˜pæ˜¯<strong>æŒ‡é’ˆ</strong>ï¼Œ</li>
<li>å†ä¸*ç»“åˆï¼Œè¯´æ˜<strong>æŒ‡é’ˆæŒ‡å‘æŒ‡é’ˆå‹</strong>ï¼Œ</li>
<li>å†ä¸intç»“åˆï¼Œè¯´æ˜<strong>äºŒçº§æŒ‡é’ˆæŒ‡å‘intå‹</strong>,</li>
<li>æ‰€ä»¥pæ˜¯äºŒçº§æŒ‡é’ˆ</li>
</ul>
</li>
<li>int p(int);<ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸()ç»“åˆï¼Œè¯´æ˜pæ˜¯<strong>å‡½æ•°</strong>ï¼Œ</li>
<li>åˆ†æ()é‡Œé¢ï¼Œå‡½æ•°æœ‰ä¸€ä¸ª<strong>intå‹å‚æ•°</strong>,</li>
<li>å†ä¸intç»“åˆï¼Œå‡½æ•°<strong>è¿”å›ç±»å‹æ˜¯int</strong></li>
</ul>
</li>
<li>int (*p)(int);<ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸*ç»“åˆï¼Œè¯´æ˜pæ˜¯<strong>æŒ‡é’ˆ</strong>,</li>
<li>å†ä¸()ç»“åˆï¼Œè¯´æ˜<strong>æŒ‡é’ˆæŒ‡å‘å‡½æ•°</strong>ï¼Œ</li>
<li>åˆ†æ()é‡Œé¢ï¼Œå‡½æ•°æœ‰ä¸€ä¸ª<strong>intå‹å‚æ•°</strong>,</li>
<li>å†ä¸intç»“åˆï¼Œå‡½æ•°<strong>è¿”å›ç±»å‹æ˜¯int</strong>,</li>
<li>æ‰€ä»¥pæ˜¯æŒ‡å‘æœ‰ä¸€ä¸ªæ•´å‹å‚æ•°ä¸”è¿”å›ç±»å‹ä¸ºæ•´æ•°çš„å‡½æ•°çš„æŒ‡é’ˆ</li>
</ul>
</li>
<li>int *(*p(int))[3];<ul>
<li>ä»på¼€å§‹ï¼Œå…ˆä¸()ç»“åˆï¼Œè¯´æ˜pæ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>,</li>
<li>åˆ†æ()é‡Œé¢ï¼Œå‡½æ•°æœ‰ä¸€ä¸ª<strong>intå‹å‚æ•°</strong>ï¼Œ</li>
<li>å†ä¸*ç»“åˆï¼Œå‡½æ•°<strong>è¿”å›ç±»å‹æ˜¯æŒ‡é’ˆ</strong>ï¼Œ</li>
<li>å†ä¸[]ç»“åˆï¼Œè¯´æ˜è¿”å›çš„<strong>æŒ‡é’ˆæŒ‡å‘[]</strong>,</li>
<li>å†ä¸*ç»“åˆï¼Œè¯´æ˜<strong>[]é‡Œæ˜¯æŒ‡é’ˆ</strong>ï¼Œ</li>
<li>å†ä¸intç»“åˆï¼Œè¯´æ˜æŒ‡é’ˆ<strong>æŒ‡å‘çš„æ˜¯intå‹</strong>ï¼Œ</li>
<li>æ‰€ä»¥pæ˜¯ä¸€ä¸ªå‚æ•°ä¸ºä¸€ä¸ªintå‹ä¸”è¿”å›ä¸€ä¸ªæŒ‡å‘æ•´å‹æŒ‡é’ˆå˜é‡ç»„æˆçš„æ•°ç»„çš„æŒ‡é’ˆå˜é‡çš„å‡½æ•°</li>
</ul>
</li>
</ol>
<h2 id="æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼Ÿ">æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>æŒ‡é’ˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œå®ƒå­˜å‚¨çš„æ•°å€¼è¢«è§£é‡Šæˆå†…å­˜é‡Œçš„ä¸€ä¸ªåœ°å€</p>
<p>å…ˆå£°æ˜å‡ ä¸ªæŒ‡é’ˆğŸŒ°ï¼š</p>
<ol>
<li>int *ptr;</li>
<li>char *ptr;</li>
<li>int **ptr;</li>
<li>int (*ptr)[3];</li>
<li>int *(*ptr)[4] </li>
</ol>
<h4 id="æŒ‡é’ˆçš„ç±»å‹">æŒ‡é’ˆçš„ç±»å‹</h4><p>æŠŠæŒ‡é’ˆåå­—å»æ‰ï¼Œå‰©ä¸‹éƒ¨åˆ†å°±æ˜¯æŒ‡é’ˆç±»å‹</p>
<h4 id="æŒ‡å‘çš„ç±»å‹">æŒ‡å‘çš„ç±»å‹</h4><p>æŠŠæŒ‡é’ˆåå’Œåå­—å·¦è¾¹çš„*å»æ‰ï¼Œå‰©ä¸‹éƒ¨åˆ†å°±æ˜¯æŒ‡é’ˆæŒ‡å‘çš„ç±»å‹</p>
<ul>
<li>æŒ‡é’ˆçš„ç±»å‹ï¼ˆæŒ‡é’ˆæœ¬èº«çš„ç±»å‹ï¼‰å’ŒæŒ‡é’ˆæŒ‡å‘çš„ç±»å‹æ˜¯<strong>ä¸¤ä¸ªæ¦‚å¿µ</strong></li>
</ul>
<h4 id="æŒ‡é’ˆçš„å€¼_â€”_æˆ–å«æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜åŒº">æŒ‡é’ˆçš„å€¼ â€” æˆ–å«æŒ‡é’ˆæŒ‡å‘çš„å†…å­˜åŒº</h4><p>åœ¨32ä½æ“ä½œç³»ç»Ÿé‡Œï¼ŒæŒ‡é’ˆéƒ½æ˜¯ä¸€ä¸ª32ä½æ•´æ•°ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜åŒºå°±æ˜¯ä»æŒ‡é’ˆçš„å€¼ä»£è¡¨çš„é‚£ä¸ª<strong>å†…å­˜åœ°å€å¼€å§‹</strong>ï¼Œé•¿åº¦ä¸º<strong>sizeof(æŒ‡é’ˆæŒ‡å‘çš„ç±»å‹)</strong>çš„ä¸€ç‰‡å†…å­˜åŒº</p>
<ul>
<li>æˆ‘ä»¬è¯´ä¸€ä¸ªæŒ‡é’ˆçš„å€¼æ˜¯XXï¼Œç›¸å½“äºè¯´æŒ‡é’ˆæŒ‡å‘äº†ä»¥XXä¸ºé¦–åœ°å€çš„ä¸€ç‰‡å†…å­˜åŒºåŸŸ</li>
<li>æˆ‘ä»¬è¯´ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘äº†æŸå—å†…å­˜åŒºåŸŸï¼Œç›¸å½“äºè¯´æŒ‡é’ˆçš„å€¼æ˜¯è¿™å—å†…å­˜åŒºåŸŸçš„é¦–åœ°å€</li>
</ul>
<h4 id="æŒ‡é’ˆæœ¬èº«å æ®çš„å†…å­˜åŒºåŸŸ">æŒ‡é’ˆæœ¬èº«å æ®çš„å†…å­˜åŒºåŸŸ</h4><p><strong>sizeof(æŒ‡é’ˆçš„ç±»å‹)</strong>ï¼Œ32ä½ç³»ç»Ÿé‡Œï¼ŒæŒ‡é’ˆå æ®4ä¸ªå­—èŠ‚</p>
<h2 id="ä¸ºä»€ä¹ˆç”¨æŒ‡é’ˆï¼Ÿ">ä¸ºä»€ä¹ˆç”¨æŒ‡é’ˆï¼Ÿ</h2><p>Cè¯­è¨€çš„ç²¾åå’Œå”¯ä¸€çš„éš¾ç‚¹å°±æ˜¯æŒ‡é’ˆï¼Œæå®šæŒ‡é’ˆç­‰äºæå®šäº†Cè¯­è¨€</p>
<p>æŒ‡é’ˆ -&gt; Cè¯­è¨€ -&gt; C++ -&gt; æ•°æ®ç»“æ„ -&gt; ç®—æ³• -&gt; èŒƒå‹ç¼–ç¨‹ä¸STLå’ŒSTLæºç å‰–æ</p>
<h2 id="æŒ‡é’ˆæ€ä¹ˆç”¨ï¼Ÿ">æŒ‡é’ˆæ€ä¹ˆç”¨ï¼Ÿ</h2><h4 id="æŒ‡é’ˆçš„ç®—æœ¯è¿ç®—">æŒ‡é’ˆçš„ç®—æœ¯è¿ç®—</h4><p>æŒ‡é’ˆå¯ä»¥åŠ ä¸Šæˆ–å‡å»ä¸€ä¸ªæ•´æ•°</p>
<ul>
<li>å’Œæ•°å€¼çš„åŠ å‡è¿ç®—ä¸ä¸€æ ·ï¼Œä»¥å•å…ƒä¸ºå•ä½</li>
<li>ä¸¤ä¸ªæŒ‡é’ˆä¸èƒ½è¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œå¾—åˆ°çš„ç»“æœä¸çŸ¥é“æŒ‡å‘ä½•å¤„</li>
<li>ä¸¤ä¸ªæŒ‡é’ˆå¯ä»¥è¿›è¡Œå‡æ³•è¿ç®—ï¼Œä½†æ˜¯ç±»å‹å¿…é¡»ç›¸åŒï¼Œä¸€èˆ¬ç”¨äºæ•°ç»„</li>
</ul>
<p>ğŸŒ°1ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> a[<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> *ptr = (<span class="keyword">int</span> *)a;  <span class="comment">//å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ä¼šæ”¹å˜açš„ç±»å‹</span></span><br><span class="line">ptr++;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">æŒ‡é’ˆptråŠ äº†<span class="number">1</span>ï¼Œç¼–è¯‘å™¨å¤„ç†ï¼šptrçš„å€¼åŠ ä¸Šäº†<span class="keyword">sizeof</span>(<span class="keyword">int</span>)ï¼Œåœ¨<span class="number">32</span>ä½ç¨‹åºé‡Œï¼Œæ˜¯åŠ äº†<span class="number">4</span>ï¼Œå› ä¸º<span class="keyword">int</span>å æ®<span class="number">4</span>ä¸ªå­—èŠ‚ã€‚</span><br><span class="line"></span><br><span class="line">ğŸŒ°<span class="number">2</span>ï¼š</span><br><span class="line"></span><br><span class="line">```c</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">array</span>[<span class="number">20</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> *ptr = <span class="built_in">array</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">	(*ptr)++;</span><br><span class="line">	ptr++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å„ä¸ªå•å…ƒçš„å€¼åŠ 1ï¼Œæ¯æ¬¡å¾ªç¯éƒ½å°†æŒ‡é’ˆptråŠ 1ä¸ªå•å…ƒï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯éƒ½èƒ½è®¿é—®åˆ°ä¸‹ä¸€ä¸ªå•å…ƒã€‚</p>
<h4 id="è¿ç®—ç¬¦_&amp;_å’Œ_*">è¿ç®—ç¬¦ &amp; å’Œ *</h4><p>&amp;æ˜¯å–åœ°å€è¿ç®—ç¬¦ï¼Œ*æ˜¯é—´æ¥è¿ç®—ç¬¦</p>
<ul>
<li>&amp;açš„è¿ç®—ç»“æœæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡é’ˆçš„ç±»å‹æ˜¯açš„ç±»å‹åŠ ä¸ª*ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„ç±»å‹æ˜¯açš„ç±»å‹ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„åœ°å€æ˜¯açš„åœ°å€</li>
<li><em>pçš„ç»“æœäº”èŠ±å…«é—¨ï¼Œ\</em>pçš„ç»“æœæ˜¯pæ‰€æŒ‡å‘çš„ä¸œè¥¿ï¼Œè¿™ä¸ªä¸œè¥¿çš„ç‰¹ç‚¹ï¼šå®ƒçš„ç±»å‹æ˜¯pæŒ‡å‘çš„ç±»å‹ï¼Œå®ƒå ç”¨çš„åœ°å€æ˜¯pæŒ‡å‘çš„åœ°å€</li>
</ul>
<p>ğŸŒ°1ï¼š </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a=<span class="number">12</span>; <span class="keyword">int</span> b; <span class="keyword">int</span> *p; <span class="keyword">int</span> **ptr;</span><br><span class="line"></span><br><span class="line">p = &amp;a; <span class="comment">//&amp;açš„ç»“æœæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œç±»å‹æ˜¯int *, æŒ‡å‘çš„ç±»å‹æ˜¯int, æŒ‡å‘çš„åœ°å€æ˜¯açš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">*p = <span class="number">24</span>; <span class="comment">//*pçš„ç»“æœï¼Œå®ƒçš„ç±»å‹æ˜¯intï¼Œå®ƒå ç”¨çš„åœ°å€æ˜¯pæŒ‡å‘çš„åœ°å€ï¼Œ*på°±æ˜¯å˜é‡a</span></span><br><span class="line"></span><br><span class="line">ptr = &amp;p; <span class="comment">//&amp;pçš„ç»“æœæ˜¯æŒ‡é’ˆï¼Œç±»å‹æ˜¯pçš„ç±»å‹åŠ ä¸ª*ï¼Œè¿™é‡Œæ˜¯int **ï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘çš„ç±»å‹æ˜¯pçš„ç±»å‹ï¼Œè¿™é‡Œæ˜¯int *ï¼Œè¯¥æŒ‡é’ˆæ‰€æŒ‡å‘çš„åœ°å€å°±æ˜¯æŒ‡é’ˆ p è‡ªå·±çš„åœ°å€</span></span><br><span class="line"></span><br><span class="line">*ptr = &amp;b; <span class="comment">//*ptr æ˜¯ä¸ªæŒ‡é’ˆ,&amp;b çš„ç»“æœä¹Ÿæ˜¯ä¸ªæŒ‡é’ˆ,ä¸”è¿™ä¸¤ä¸ªæŒ‡é’ˆçš„ç±»å‹å’Œæ‰€æŒ‡å‘çš„ç±»å‹æ˜¯ä¸€æ ·çš„,æ‰€ä»¥ç”¨&amp;b æ¥ç»™*ptr èµ‹å€¼å°±æ˜¯æ¯«æ— é—®é¢˜çš„äº†</span></span><br><span class="line"></span><br><span class="line">**ptr = <span class="number">34</span>; <span class="comment">//*ptr çš„ç»“æœæ˜¯ ptr æ‰€æŒ‡å‘çš„ä¸œè¥¿,åœ¨è¿™é‡Œæ˜¯ä¸€ä¸ªæŒ‡é’ˆ, å¯¹è¿™ä¸ªæŒ‡é’ˆå†åšä¸€æ¬¡*è¿ç®—,ç»“æœæ˜¯ä¸€ä¸ª int ç±»å‹çš„å˜é‡ã€‚</span></span><br></pre></td></tr></table></figure>
<h4 id="æŒ‡é’ˆè¡¨è¾¾å¼">æŒ‡é’ˆè¡¨è¾¾å¼</h4><p>ä¸€ä¸ªè¡¨è¾¾å¼çš„ç»“æœæ˜¯æŒ‡é’ˆï¼Œå³æŒ‡é’ˆè¡¨è¾¾å¼</p>
<p>ğŸŒ°1ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a,b;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">array</span>[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> *pa;</span><br><span class="line">pa = &amp;a;				<span class="comment">//&amp;a</span></span><br><span class="line"><span class="keyword">int</span> **ptr = &amp;pa;    <span class="comment">//&amp;pa</span></span><br><span class="line">*ptr = &amp;b;          <span class="comment">//*ptr å’Œ &amp;b </span></span><br><span class="line">pa = <span class="built_in">array</span>;</span><br><span class="line">pa++;					<span class="comment">//pa</span></span><br></pre></td></tr></table></figure>
<p>å½“ä¸€ä¸ªæŒ‡é’ˆè¡¨è¾¾å¼çš„ç»“æœæŒ‡é’ˆå·²ç»æ˜ç¡®åœ°å…·æœ‰äº†æŒ‡é’ˆè‡ªèº«å  æ®çš„å†…å­˜çš„è¯,è¿™ä¸ªæŒ‡é’ˆè¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªå·¦å€¼,å¦åˆ™å°±ä¸æ˜¯ä¸€ä¸ªå·¦å€¼</p>
<h4 id="æŒ‡é’ˆå’Œæ•°ç»„">æŒ‡é’ˆå’Œæ•°ç»„</h4><p>æ•°ç»„åå¯ä»¥çœ‹ä½œä¸€ä¸ªæŒ‡é’ˆ</p>
<p>ğŸŒ°1ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">intarray[<span class="number">10</span>]=&#123;<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;,value;value=<span class="built_in">array</span>[<span class="number">0</span>];		<span class="comment">//å¯å†™æˆï¼š value = *array;</span>value=<span class="built_in">array</span>[<span class="number">3</span>];		<span class="comment">//å¯å†™æˆï¼š	value = *(array+3);</span>value=<span class="built_in">array</span>[<span class="number">4</span>];		<span class="comment">//å¯å†™æˆï¼š value = *(array+4);</span></span><br></pre></td></tr></table></figure>
<p>æ•°ç»„åarrayä»£è¡¨æ•°ç»„æœ¬èº«ï¼Œç±»å‹æ˜¯int[10]ï¼Œå¦‚æœæŠŠarrayçœ‹ä½œæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘æ•°ç»„çš„ç¬¬0ä¸ªå•å…ƒï¼Œç±»å‹æ˜¯int <em>ï¼Œ æ‰€æŒ‡å‘çš„ç±»å‹æ˜¯æ˜¯æ•°ç»„å•å…ƒçš„ç±»å‹å³intï¼Œå› æ­¤\</em>array ç­‰äº 0 å°±ä¸€ç‚¹ä¹Ÿä¸ å¥‡æ€ªäº†ã€‚åŒç†,array+3 æ˜¯ä¸€ä¸ªæŒ‡å‘æ•°ç»„ç¬¬ 3 ä¸ªå•å…ƒçš„æŒ‡é’ˆ,æ‰€ä»¥ *(array+3)ç­‰äº 3ã€‚å…¶å®ƒä¾æ­¤ç±»æ¨</p>
<h4 id="æŒ‡é’ˆå’Œç»“æ„ç±»å‹">æŒ‡é’ˆå’Œç»“æ„ç±»å‹</h4><p>å¯ä»¥å£°æ˜ä¸€ä¸ªæŒ‡å‘ç»“æ„ç±»å¯¹è±¡çš„æŒ‡é’ˆ</p>
<p>ğŸŒ°1ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> MyStruct &#123;</span><br><span class="line">	<span class="keyword">int</span> a;</span><br><span class="line">	<span class="keyword">int</span> b;</span><br><span class="line">	<span class="keyword">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> MyStruct ss = &#123;<span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> MyStruct *ptr = &amp;ss;  <span class="comment">//å£°æ˜ä¸€ä¸ªæŒ‡å‘ç»“æ„å¯¹è±¡ssçš„æŒ‡é’ˆï¼Œå®ƒçš„ç±»å‹æ˜¯MyStruct *ï¼Œå®ƒæŒ‡å‘çš„ç±»å‹æ˜¯MyStruct</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> *pstr = (<span class="keyword">int</span> *)&amp;ss; <span class="comment">//å£°æ˜ä¸€ä¸ªæŒ‡å‘ç»“æ„å¯¹è±¡ssçš„æŒ‡é’ˆï¼Œä½†æ˜¯pstrå’Œå®ƒè¢«æŒ‡å‘çš„ç±»å‹ptræ˜¯ä¸åŒçš„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  ptr æ¥è®¿é—® ss çš„ä¸‰ä¸ªæˆå‘˜å˜é‡</span></span><br><span class="line">ptr-&gt;a;  <span class="comment">//æŒ‡å‘è¿ç®—ç¬¦</span></span><br><span class="line">ptr-&gt;b;</span><br><span class="line">ptr-&gt;c;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  pstr æ¥è®¿é—® ss çš„ä¸‰ä¸ªæˆå‘˜å˜é‡</span></span><br><span class="line">*pstr;</span><br><span class="line">*(pstr + <span class="number">1</span>);</span><br><span class="line">*(pstr + <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h4 id="æŒ‡é’ˆå’Œå‡½æ•°">æŒ‡é’ˆå’Œå‡½æ•°</h4><p>å¯ä»¥å£°æ˜ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆ</p>
<p>ğŸŒ°1ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">fun1</span><span class="params">(<span class="keyword">char</span> *, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> (*pfun1)(<span class="keyword">char</span> *, <span class="keyword">int</span>);</span><br><span class="line"></span><br><span class="line">pfun1 = fun1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a = (*pfun1)(<span class="string">"abcdefg"</span>, <span class="number">7</span>);  <span class="comment">//é€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨å‡½æ•°</span></span><br></pre></td></tr></table></figure>
<p>æŒ‡é’ˆä½œä¸ºå‡½æ•°çš„å½¢å‚ï¼Œå‡½æ•°è°ƒç”¨ä¸­ï¼Œç”¨æŒ‡é’ˆè¡¨è¾¾å¼æ¥ä½œä¸ºå®å‚</p>
<h4 id="æŒ‡é’ˆç±»å‹è½¬æ¢">æŒ‡é’ˆç±»å‹è½¬æ¢</h4><p>ğŸŒ°1ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> f = <span class="number">12.3</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> *fptr = &amp;f;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> *p;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æƒ³è®©æŒ‡é’ˆ p æŒ‡å‘å®æ•° f</span></span><br><span class="line">p=&amp;f; <span class="comment">//ä¸å¯¹ã€‚å› ä¸ºæŒ‡é’ˆ p çš„ç±»å‹æ˜¯ int *,å®ƒæŒ‡å‘çš„ç±»å‹æ˜¯ int</span></span><br><span class="line"></span><br><span class="line">p=(<span class="keyword">int</span>*)&amp;f; <span class="comment">// å¦‚æœæœ‰ä¸€ä¸ªæŒ‡é’ˆ p,æˆ‘ä»¬éœ€è¦æŠŠå®ƒçš„ç±»å‹å’Œæ‰€æŒ‡å‘çš„ç±»å‹æ”¹ä¸º</span>TYEP *TYPE, é‚£ä¹ˆè¯­æ³•æ ¼å¼æ˜¯: (TYPE *)p;</span><br></pre></td></tr></table></figure>
<p>å¼ºåˆ¶ç±»å‹è½¬æ¢çš„ç»“æœæ˜¯ä¸€ä¸ªæ–°æŒ‡é’ˆ,è¯¥æ–°æŒ‡é’ˆçš„ç±»å‹æ˜¯TYPE *,å®ƒæŒ‡å‘çš„ç±»å‹æ˜¯ TYPE,å®ƒæŒ‡å‘çš„åœ°å€å°±æ˜¯åŸæŒ‡é’ˆæŒ‡å‘çš„åœ°å€ã€‚ <strong>è€ŒåŸæ¥çš„æŒ‡é’ˆ p çš„ä¸€åˆ‡å±æ€§éƒ½æ²¡æœ‰è¢«ä¿®æ”¹ã€‚(åˆ‡è®°)</strong></p>
<h4 id="æŒ‡é’ˆçš„å®‰å…¨é—®é¢˜">æŒ‡é’ˆçš„å®‰å…¨é—®é¢˜</h4><ol>
<li>æŒ‡é’ˆè®¿é—®æ•°ç»„æ—¶ï¼Œä¸è¦è¶…è¿‡æ•°ç»„ä½ç«¯å’Œé«˜ç«¯çš„ç•Œé™</li>
<li>å¼ºåˆ¶ç±»å‹è½¬æ¢ptr1 = (TYPE *)ptr2ä¸­ï¼Œå¦‚æœsizeof(prt2çš„ç±»å‹)å¤§äºsizeof(ptr1çš„ç±»å‹)ï¼Œé‚£ä¹ˆä½¿ç”¨æŒ‡é’ˆptr1è®¿é—®ptr2æ‰€æŒ‡å‘çš„å­˜å‚¨åŒºåŸŸæ˜¯å®‰å…¨çš„</li>
</ol>
<h2 id="æŒ‡é’ˆçš„å®é™…åº”ç”¨">æŒ‡é’ˆçš„å®é™…åº”ç”¨</h2><h4 id="XXä¼š">XXä¼š</h4><h4 id="XXä»“">XXä»“</h4>
                    
                        
                    
                    
                        <p>
                            <a href="/2015/06/20/c_pointer/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom" itemscope itemType="http://schema.org/BlogPosting">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title" itemprop="headline">
                    
                        <a class="link-unstyled" href="/2015/06/17/c3p0/">
                            C3P0çš„ä¸¤ç§ç”¨æ³•
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time itemprop="datePublished" datetime="2015-06-17T18:15:02+08:00">
	
		    Jun 17, 2015
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content" itemprop="articleBody">
                    <h6 id="background">background</h6><blockquote>
<p>è¿™ç¯‡æ–‡ç« æ‘˜æŠ„è‡ªæˆ‘çš„æ–°æµªåšå®¢ï¼Œ<a href="http://blog.sina.com.cn/s/blog_6c5f4d3c01012gtq.html" target="_blank" rel="external">è¯¦æƒ…é“¾æ¥</a> å› ä¸ºå®ƒä¸€åº¦ä¸ºæˆ‘çš„æ–°æµªåšå®¢ç§¯ç´¯è¶…è¿‡7ä¸‡çš„äººæ°”ï¼Œæ–°æµªåšå®¢å·²ç»è¿œä¸å¦‚æ›¾ç»ï¼Œæ‰€ä»¥æˆ‘æƒ³æŠŠè¿™ç¯‡æ–‡ç« ä¿ç•™ä¸‹æ¥ï¼Œä»¥ä¸‹æ˜¯åŸæ–‡</p>
</blockquote>
<h6 id="æ–¹æ³•ä¸€ï¼š">æ–¹æ³•ä¸€ï¼š</h6><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">package   C3P0; </span><br><span class="line">import   java.sql.Connection; </span><br><span class="line">import   java.sql.SQLException; </span><br><span class="line">import   java.beans.PropertyVetoException; </span><br><span class="line">import   com.mchange.v2.c3p0.ComboPooledDataSource; </span><br><span class="line">public   class   DBPool&#123;       </span><br><span class="line">   private   static   DBPool   dbPool;       </span><br><span class="line">   private   ComboPooledDataSource   dataSource;     </span><br><span class="line">	</span><br><span class="line">   static   &#123;       </span><br><span class="line">           dbPool=new   DBPool();       </span><br><span class="line">   &#125;       </span><br><span class="line">   </span><br><span class="line">   public   DBPool()&#123;       </span><br><span class="line">           try   &#123;       </span><br><span class="line">                   dataSource=new   ComboPooledDataSource();       </span><br><span class="line">                   dataSource.setUser( "id ");       </span><br><span class="line">                   dataSource.setPassword( "pw ");       </span><br><span class="line">                   dataSource.setJdbcUrl( "jdbc:mysql://127.0.0.1:3306/test? </span><br><span class="line">	</span><br><span class="line">autoReconnect=true&amp;useUnicode=true&amp;characterEncoding=GB2312 "); </span><br><span class="line">                   dataSource.setDriverClass( "com.mysql.jdbc.Driver "); </span><br><span class="line">                   dataSource.setInitialPoolSize(2); </span><br><span class="line">                   dataSource.setMinPoolSize(1); </span><br><span class="line">                   dataSource.setMaxPoolSize(10); </span><br><span class="line">                   dataSource.setMaxStatements(50); </span><br><span class="line">                   dataSource.setMaxIdleTime(60);       </span><br><span class="line">           &#125;   catch   (PropertyVetoException   e)   &#123;       </span><br><span class="line">               throw   new   RuntimeException(e);       </span><br><span class="line">           &#125;       </span><br><span class="line">   &#125;       </span><br><span class="line">	</span><br><span class="line">   public   final   static   DBPool   getInstance()&#123;       </span><br><span class="line">           return   dbPool;       </span><br><span class="line">   &#125;       </span><br><span class="line">	</span><br><span class="line">   public   final   Connection   getConnection()   &#123;       </span><br><span class="line">           try   &#123;       </span><br><span class="line">                   return   dataSource.getConnection();       </span><br><span class="line">           &#125;   catch   (SQLException   e)   &#123;       </span><br><span class="line">                   throw   new   RuntimeException( "æ— æ³•ä»æ•°æ®æºè·å–è¿æ¥ ",e);       </span><br><span class="line">           &#125;       </span><br><span class="line">   &#125;     </span><br><span class="line">   </span><br><span class="line">   public   static   void   main(String[]   args)   throws   SQLException   &#123; </span><br><span class="line">Connection   con   =   null; </span><br><span class="line">try   &#123; </span><br><span class="line">con   =   DBPool.getInstance().getConnection(); </span><br><span class="line">&#125;   catch   (Exception   e)&#123; </span><br><span class="line">&#125;   finally   &#123; </span><br><span class="line">if   (con   !=   null) </span><br><span class="line">con.close(); </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="æ–¹æ³•äºŒï¼š">æ–¹æ³•äºŒï¼š</h6><pre><code>åŸæ¥ä¸çŸ¥é“ä½¿ç”¨c3p0 æ˜¯å¦‚æ­¤çš„ç®€å•ï¼Œæˆ‘ä¸€ç›´ä½¿ç”¨<span class="keyword">properties</span> æ–‡ä»¶å»é…ç½®c3p0ï¼Œä½†æ€»æ˜¯è¿æ¥ä¸ä¸Šæ•°æ®åº“ï¼Œåæ¥è°ƒè¯•æ‰å‘ç°ComboPooledDataSource è¿™ä¸ªå¯¹è±¡çš„å±æ€§æ²¡æœ‰è¢«è®¾ç½®æˆåŠŸï¼Œæˆ‘æ˜¯å…ˆè·å–äº†<span class="keyword">properties</span>æ–‡ä»¶çš„å†…å®¹ï¼Œå°è£…åœ¨ä¸€ä¸ª Propertieså¯¹è±¡é‡Œé¢ï¼Œç„¶åç›´æ¥è°ƒç”¨ ComboPooledDataSource çš„ setPropertiesï¼ˆProperties  pï¼‰ æ–¹æ³•æ¥é…ç½®c3p0ï¼Œç¨‹åºæ˜¯æ²¡æœ‰æŠ¥é”™ï¼Œä½†è¿ä¸ä¸Šæ•°æ®åº“ï¼Œè°ƒè¯•å‘ç°å±æ€§éƒ½æ²¡æœ‰è®¾ç½®æˆåŠŸï¼Œåªæ˜¯<span class="keyword">properties</span>è¿™ä¸ªå±æ€§è¢«è®¾ç½®äº†è€Œå·²ï¼Œç»“æœæˆ‘å¯¹æ¯ä¸ªå±æ€§è°ƒç”¨setæ–¹æ³•åå°±è¿æ¥ä¸Šäº†ã€‚ã€‚ã€‚
</code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnectionManager</span> </span>&#123;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> ConnectionManager instance;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> ComboPooledDataSource ds;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> String c3p0Properties = <span class="string">"c3p0.properties"</span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">private</span> <span class="title">ConnectionManager</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">  p.load(<span class="keyword">this</span>.getClass().getResourceAsStream(c3p0Properties));</span><br><span class="line">  ds = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">  ds.setUser(p.getProperty(<span class="string">"user"</span>));</span><br><span class="line">  ds.setPassword(p.getProperty(<span class="string">"user"</span>));</span><br><span class="line">  ds.setJdbcUrl(p.getProperty(<span class="string">"user"</span>));</span><br><span class="line">  ds.setDriverClass(p.getProperty(<span class="string">"user"</span>));</span><br><span class="line">  ds.setInitialPoolSize(Integer.parseInt(p.getProperty(<span class="string">"initialPoolSize"</span>)));</span><br><span class="line">  ds.setMinPoolSize(Integer.parseInt(p.getProperty(<span class="string">"minPoolSize"</span>)));</span><br><span class="line">  ds.setMaxPoolSize(Integer.parseInt(p.getProperty(<span class="string">"maxPoolSize"</span>)));</span><br><span class="line">  ds.setMaxStatements(Integer.parseInt(p.getProperty(<span class="string">"maxStatements"</span>)));</span><br><span class="line">  ds.setMaxIdleTime(Integer.parseInt(p.getProperty(<span class="string">"maxIdleTime"</span>)));</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> ConnectionManager <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">   <span class="keyword">try</span> &#123;</span><br><span class="line">    instance = <span class="keyword">new</span> ConnectionManager();</span><br><span class="line">   &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> instance;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">final</span> Connection <span class="title">getConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">   e.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">  DataSources.destroy(ds); <span class="comment">// å…³é—­datasource</span></span><br><span class="line">  <span class="keyword">super</span>.finalize();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>å¦‚æ­¤å°±å¯ä»¥è·å–connectionæ¥åšjdbcæ“ä½œäº†ï¼š
Connection         
conn=ConnectionManager.getInstance().getConnection()<span class="comment">;</span>
è®°å¾—ä½¿ç”¨å®Œåè°ƒç”¨closeæ–¹æ³•ï¼š
conn.close()<span class="comment">;</span>
c3p0 çš„æŸäº›å‚æ•°çš„é…ç½®ä»¥åŠæ„ä¹‰è§å¦å¤–ä¸€ç¯‡æ–‡ç« http://kangzye.blog.163.com/blog/static/<span class="number">3681922320104</span><span class="number">42162576</span>/
</code></pre>
                    
                        
                    
                    
                        <p>
                            <a href="/2015/06/17/c3p0/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2017 yolynn. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/head.png"/>
        
            <h4 id="about-card-name">yolynn</h4>
        
            <h5 id="about-card-bio"><p>äº‘åœ¨é’å¤©æ°´åœ¨ç“¶ - å¹½çµé¸Ÿ</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>vip.com</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                China
            </h5>
        
    </div>
</div>

        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/jquery.js" type="text/javascript"></script>
<script src="/assets/js/jquery.fancybox.js" type="text/javascript"></script>
<script src="/assets/js/jquery.fancybox-thumbs.js" type="text/javascript"></script>
<script src="/assets/js/tranquilpeak.js" type="text/javascript"></script>
<!--SCRIPTS END-->



</html>
